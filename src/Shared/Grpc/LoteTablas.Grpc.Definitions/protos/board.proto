syntax = "proto3";

option csharp_namespace = "LoteTablas.Grpc.Definitions";

package BoardService;

import "common.proto";

service Board {
    
  rpc GetBoardSizes (Common.EmptyRequest) returns (BoardSizesReply);

  rpc GetUserBoards(Common.UserIdRequest) returns (GetUserBoardsReply);

  rpc SaveUserBoard (SaveUserBoardRequest) returns (Common.SuccessReply);
  
  rpc DeleteUserBoard (DeleteUserBoardRequest) returns (Common.SuccessReply);

  rpc GetBoardDocumentStream(BoardDocumentRequest) returns (stream Common.DataChunk) {}

  rpc GetBoardDocumentsStream(BoardDocumentsRequest) returns (stream Common.DataChunk) {} 

}


message BoardSizesReply {
  repeated BoardSizeModel boardSizes = 1;
}

message BoardSizeModel {
	string boardSizeId = 1;
	string code = 2;
	int32 xSize = 3;
	int32 ySize = 4;
}

message GetUserBoardsReply	{
	repeated UserBoardModel userBoards = 1;
}

message UserBoardModel {
	string userBoardId = 1;
	string ownerUserId = 2;
	string lotteryId = 3;
	repeated UserBoardCardModel userBoardCards = 4;
}

message UserBoardCardModel {
	string cardId = 1;
	int32 ordinal = 2;
}

message DeleteUserBoardRequest {
	string userBoardId = 1;
}

message SaveUserBoardRequest {
	string ownerUserId = 1;
	string lotteryId = 2;
	repeated UserBoardCardModel userBoardCards = 3;
}

// 

message BoardDocumentRequest {
	BoardDocumentModel board = 1;
}

message BoardDocumentsRequest {
	repeated BoardDocumentModel boards = 1;
}

message BoardDocumentModel {
	repeated BoardDocumentCardModel boardCards = 1;
}

message BoardDocumentCardModel {
	string cardId = 1;
	int32 ordinal = 2;
}

